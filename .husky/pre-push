#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "üîç Checking for documentation violations..."

# Check for docs outside allowed locations
VIOLATIONS=$(find . -name "*.md" -not -path "./docs-portal/*" -not -path "./.claude/*" -not -path "./tools/*/README.md" -not -path "./node_modules/*" -not -path "./marked for removal/*" | grep -v "README.md\|CHANGELOG.md\|PIVOT_QUESTIONS.md")

if [ ! -z "$VIOLATIONS" ]; then
    echo "‚ùå Documentation files found outside docs-portal/:"
    echo "$VIOLATIONS"
    echo ""
    echo "üìÅ All documentation must be in docs-portal/"
    echo "   - User docs: docs-portal/docs/"
    echo "   - AI docs: docs-portal/ai-docs/"
    echo "   - Blog: docs-portal/blog/"
    echo ""
    echo "Move these files before pushing."
    exit 1
fi

# Check for /docs directory
if [ -d "docs" ]; then
    echo "‚ùå /docs directory exists. All docs must be in docs-portal/"
    echo "Run: mv docs/* docs-portal/docs/"
    exit 1
fi

echo "‚úÖ Documentation structure check passed!"