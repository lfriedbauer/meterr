#!/usr/bin/env sh

# Documentation location check
echo "📁 Checking documentation location..."
if [ -d "docs" ]; then
  echo "❌ Error: /docs folder detected!"
  echo "   All documentation must be in /docs-portal/"
  echo "   Please move any files from /docs to /docs-portal/docs/"
  exit 1
fi

# Check for .md files outside docs-portal (excluding root README and .claude)
MD_FILES=$(find . -name "*.md" -not -path "./docs-portal/*" -not -path "./node_modules/*" -not -path "./.claude/*" -not -path "./README.md" -not -path "./**/node_modules/*" -not -path "./.git/*" 2>/dev/null)
if [ ! -z "$MD_FILES" ]; then
  echo "❌ Error: Documentation files found outside /docs-portal/:"
  echo "$MD_FILES"
  echo "   Please move all documentation to /docs-portal/"
  exit 1
fi

# Documentation consistency check
echo "📝 Checking documentation consistency..."
pnpm check:docs-consistency

# Type checking
echo "🔍 Running type checks..."
pnpm typecheck

# Linting
echo "✨ Running linter..."
pnpm lint

echo "✅ All pre-commit checks passed!"
